-- Advanced Compact Admin Panel by YiuSanNiun
-- Put this LocalScript in StarterGui

local Player = game.Players.LocalPlayer
local char = Player.Character or Player.CharacterAdded:Wait()
local hum = char:WaitForChild("Humanoid")

-- GUI Root
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AdminPanel"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = Player:WaitForChild("PlayerGui")

-- Main Frame (centered)
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 360, 0, 440)
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0) -- CENTERED
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui
Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 12)

-- Title
local Title = Instance.new("TextLabel", MainFrame)
Title.Size = UDim2.new(1, 0, 0, 40)
Title.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
Title.Text = "âš¡ Admin Panel - By YiuSanNiun âš¡"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 16
Instance.new("UICorner", Title).CornerRadius = UDim.new(0, 12)

-- Open/Close button (small, neat)
local ToggleBtn = Instance.new("TextButton", ScreenGui)
ToggleBtn.Size = UDim2.new(0, 90, 0, 35)
ToggleBtn.Position = UDim2.new(0, 20, 0, 20)
ToggleBtn.Text = "Open"
ToggleBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
ToggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
ToggleBtn.Font = Enum.Font.GothamBold
ToggleBtn.TextSize = 14
Instance.new("UICorner", ToggleBtn).CornerRadius = UDim.new(0, 8)

MainFrame.Visible = false
local panelOpen = false
ToggleBtn.MouseButton1Click:Connect(function()
	panelOpen = not panelOpen
	MainFrame.Visible = panelOpen
	ToggleBtn.Text = panelOpen and "Close" or "Open"
end)

-- Scroll container
local Scroll = Instance.new("ScrollingFrame", MainFrame)
Scroll.Size = UDim2.new(1, -10, 1, -50)
Scroll.Position = UDim2.new(0, 5, 0, 45)
Scroll.CanvasSize = UDim2.new(0, 0, 0, 1000)
Scroll.BackgroundTransparency = 1
Scroll.ScrollBarThickness = 4

local UIList = Instance.new("UIListLayout", Scroll)
UIList.Padding = UDim.new(0, 6)
UIList.FillDirection = Enum.FillDirection.Vertical
UIList.SortOrder = Enum.SortOrder.LayoutOrder

-- Helper: Button
local function createBtn(name, callback)
	local btn = Instance.new("TextButton", Scroll)
	btn.Size = UDim2.new(1, -10, 0, 35)
	btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
	btn.Text = name
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 14
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)
	btn.MouseButton1Click:Connect(function() callback(btn) end)
	return btn
end

-- Helper: Toggle Color
local function setToggle(btn, state)
	btn.BackgroundColor3 = state and Color3.fromRGB(0, 170, 0) or Color3.fromRGB(60, 60, 60)
end

-- Helper: Input Box (Speed, Jump, Health)
local function createInput(labelText, defaultValue, onConfirm)
	local frame = Instance.new("Frame", Scroll)
	frame.Size = UDim2.new(1, -10, 0, 40)
	frame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 8)

	local lbl = Instance.new("TextLabel", frame)
	lbl.Size = UDim2.new(0.5, -5, 1, 0)
	lbl.Position = UDim2.new(0, 5, 0, 0)
	lbl.BackgroundTransparency = 1
	lbl.Text = labelText
	lbl.TextColor3 = Color3.fromRGB(255, 255, 255)
	lbl.Font = Enum.Font.GothamBold
	lbl.TextSize = 14
	lbl.TextXAlignment = Enum.TextXAlignment.Left

	local box = Instance.new("TextBox", frame)
	box.Size = UDim2.new(0.45, -5, 1, -6)
	box.Position = UDim2.new(0.5, 0, 0, 3)
	box.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
	box.Text = ""
	box.PlaceholderText = tostring(defaultValue)
	box.TextColor3 = Color3.fromRGB(255, 255, 255)
	box.Font = Enum.Font.Gotham
	box.TextSize = 14
	Instance.new("UICorner", box).CornerRadius = UDim.new(0, 6)

	box.FocusLost:Connect(function(enterPressed)
		if enterPressed then
			local val = tonumber(box.Text)
			if val then
				onConfirm(val)
				box.Text = tostring(val)
			else
				box.Text = ""
				onConfirm(defaultValue)
			end
		end
	end)
end

-- ðŸ”¹ FEATURES ðŸ”¹

-- Infinite Jump
local infJumpEnabled = false
createBtn("Infinite Jump", function(btn)
	infJumpEnabled = not infJumpEnabled
	setToggle(btn, infJumpEnabled)
end)
game:GetService("UserInputService").JumpRequest:Connect(function()
	if infJumpEnabled and hum then
		hum:ChangeState("Jumping")
	end
end)

-- Invisibility
local invisible = false
createBtn("Toggle Invisibility", function(btn)
	invisible = not invisible
	for _, p in pairs(char:GetDescendants()) do
		if p:IsA("BasePart") then
			p.LocalTransparencyModifier = invisible and 1 or 0
		end
	end
	setToggle(btn, invisible)
end)

-- Speed Control
createInput("Speed:", 16, function(val)
	hum.WalkSpeed = val
end)

-- Jump Power Control
createInput("Jump Power:", 50, function(val)
	hum.UseJumpPower = true
	hum.JumpPower = val
end)

-- Health Control
createInput("Health:", 100, function(val)
	hum.Health = val
	hum.MaxHealth = val
end)

-- Godmode
local godmode = false
createBtn("Godmode", function(btn)
	godmode = not godmode
	setToggle(btn, godmode)
	if godmode then
		hum.HealthChanged:Connect(function()
			hum.Health = hum.MaxHealth
		end)
	end
end)

-- Fly
local flyEnabled = false
local bodyVel, bodyGyro
createBtn("Toggle Fly", function(btn)
	flyEnabled = not flyEnabled
	setToggle(btn, flyEnabled)
	if flyEnabled then
		bodyVel = Instance.new("BodyVelocity", char:FindFirstChild("HumanoidRootPart"))
		bodyVel.MaxForce = Vector3.new(4000, 4000, 4000)
		bodyVel.Velocity = Vector3.zero
		bodyGyro = Instance.new("BodyGyro", char:FindFirstChild("HumanoidRootPart"))
		bodyGyro.MaxTorque = Vector3.new(4000, 4000, 4000)
		game:GetService("RunService").Heartbeat:Connect(function()
			if flyEnabled and bodyVel and bodyGyro then
				local cam = workspace.CurrentCamera
				local moveDir = Vector3.zero
				if game.UserInputService:IsKeyDown(Enum.KeyCode.W) then
					moveDir = moveDir + cam.CFrame.LookVector
				end
				if game.UserInputService:IsKeyDown(Enum.KeyCode.S) then
					moveDir = moveDir - cam.CFrame.LookVector
				end
				if game.UserInputService:IsKeyDown(Enum.KeyCode.A) then
					moveDir = moveDir - cam.CFrame.RightVector
				end
				if game.UserInputService:IsKeyDown(Enum.KeyCode.D) then
					moveDir = moveDir + cam.CFrame.RightVector
				end
				if game.UserInputService:IsKeyDown(Enum.KeyCode.Space) then
					moveDir = moveDir + Vector3.new(0,1,0)
				end
				if game.UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then
					moveDir = moveDir - Vector3.new(0,1,0)
				end
				bodyVel.Velocity = moveDir * 60
				bodyGyro.CFrame = cam.CFrame
			end
		end)
	else
		if bodyVel then bodyVel:Destroy() end
		if bodyGyro then bodyGyro:Destroy() end
	end
end)

-- Sit
createBtn("Sit / Unsit", function(btn)
	hum.Sit = not hum.Sit
end)

-- Respawn
createBtn("Respawn", function(btn)
	Player:LoadCharacter()
end)

-- ESP
local espEnabled = false
createBtn("ESP Names", function(btn)
	espEnabled = not espEnabled
	setToggle(btn, espEnabled)
	for _, plr in pairs(game.Players:GetPlayers()) do
		if plr ~= Player and plr.Character and plr.Character:FindFirstChild("Head") then
			if espEnabled then
				if not plr.Character.Head:FindFirstChild("ESPTag") then
					local bill = Instance.new("BillboardGui", plr.Character.Head)
					bill.Name = "ESPTag"
					bill.Size = UDim2.new(0, 200, 0, 50)
					bill.AlwaysOnTop = true
					local label = Instance.new("TextLabel", bill)
					label.Size = UDim2.new(1, 0, 1, 0)
					label.BackgroundTransparency = 1
					label.Text = plr.Name
					label.TextColor3 = Color3.fromRGB(255, 0, 0)
					label.Font = Enum.Font.GothamBold
					label.TextSize = 14
				end
			else
				local old = plr.Character.Head:FindFirstChild("ESPTag")
				if old then old:Destroy() end
			end
		end
	end
end)

-- Noclip
local noclip = false
createBtn("Toggle Noclip", function(btn)
	noclip = not noclip
	setToggle(btn, noclip)
end)
game:GetService("RunService").Stepped:Connect(function()
	if noclip and char then
		for _, p in pairs(char:GetDescendants()) do
			if p:IsA("BasePart") then
				p.CanCollide = false
			end
		end
	end
end)

-- Gravity
createBtn("Low Gravity", function(btn)
	workspace.Gravity = 50
	btn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
end)
createBtn("Reset Gravity", function(btn)
	workspace.Gravity = 196.2
	btn.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
	task.wait(0.4)
	btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
end)

-- Touch Kill
createBtn("Touch Kill", function(btn)
	for _, p in pairs(char:GetDescendants()) do
		if p:IsA("BasePart") then
			p.Touched:Connect(function(hit)
				local h = hit.Parent:FindFirstChildOfClass("Humanoid")
				if h and hit.Parent ~= char then
					h.Health = 0
				end
			end)
		end
	end
	btn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
end)
